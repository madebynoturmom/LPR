import"../chunks/DsnmJJEf.js";import"../chunks/DsPuBiMm.js";import{ab as U,u as D,p as N,m as _,f as O,t as R,g as E,b as q,c as j,e as i,d as p,s as L,r as d,n as z}from"../chunks/N5lxWZGS.js";import{e as J}from"../chunks/Dx3h8YKD.js";import{r as k,s as B}from"../chunks/BnZ110ug.js";import{b as T}from"../chunks/DnwoYYiD.js";import{i as G}from"../chunks/Bc0xGMnQ.js";import{p as I}from"../chunks/BBnkIoAR.js";import{a as K,b as Q,p as V,c as W}from"../chunks/WNbVgFxQ.js";function X(e,a,s){U(()=>{var m=D(()=>a(e,s?.())||{});if(m?.destroy)return()=>m.destroy()})}function Y(e){const a=JSON.parse(e);return a.data&&(a.data=V(a.data,W.decoders)),a}function M(e){return HTMLElement.prototype.cloneNode.call(e)}function Z(e,a=()=>{}){const s=async({action:t,result:u,reset:o=!0,invalidateAll:f=!0})=>{u.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(e),f&&await K()),(location.origin+location.pathname===t.origin+t.pathname||u.type==="redirect"||u.type==="error")&&await Q(u)};async function m(t){if((t.submitter?.hasAttribute("formmethod")?t.submitter.formMethod:M(e).method)!=="post")return;t.preventDefault();const o=new URL(t.submitter?.hasAttribute("formaction")?t.submitter.formAction:M(e).action),f=t.submitter?.hasAttribute("formenctype")?t.submitter.formEnctype:M(e).enctype,n=new FormData(e),b=t.submitter?.getAttribute("name");b&&n.append(b,t.submitter?.getAttribute("value")??"");const v=new AbortController;let h=!1;const A=await a({action:o,cancel:()=>h=!0,controller:v,formData:n,formElement:e,submitter:t.submitter})??s;if(h)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const w=f==="multipart/form-data"?n:new URLSearchParams(n),y=await fetch(o,{method:"POST",headers:r,cache:"no-store",body:w,signal:v.signal});l=Y(await y.text()),l.type==="error"&&(l.status=y.status)}catch(r){if(r?.name==="AbortError")return;l={type:"error",error:r}}await A({action:o,formData:n,formElement:e,update:r=>s({action:o,result:l,reset:r?.reset,invalidateAll:r?.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",m),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",m)}}}var $=O('<div class="dashboard-container"><header class="dashboard-overview"><div class="overview-left"><div class="overview-text"><h1 class="overview-title">Account</h1> <div class="overview-date">Manage account information</div></div></div></header> <section class="settings-section"><form method="POST" enctype="multipart/form-data"><div class="subpage-card settings-card"><div class="subpage-header"><h1 class="subpage-title">Account Settings</h1></div> <div class="profile-pic-section"><img alt="Profile preview" class="profile-pic-preview"/> <label for="profilePicture" class="upload-label">Change Photo <input id="profilePicture" name="profilePicture" type="file" accept="image/*"/></label></div> <div class="form-row"><label for="username">Username</label> <input id="username" name="username" type="text" required/></div> <div class="form-row"><label for="name">Name</label> <input id="name" name="name" type="text" required/></div> <div class="form-row"><label for="email">Email</label> <input id="email" name="email" type="email" required/></div> <div class="form-row"><label for="password">New Password</label> <input id="password" name="password" type="password" placeholder="Leave blank to keep current password" autocomplete="new-password"/></div> <button class="save-btn" type="submit">Save Changes</button></div></form></section></div>');function ce(e,a){N(a,!1);let s=I(a,"data",8),m=_(s()?.user?.name??""),t=_(s()?.user?.email??""),u=_(s()?.user?.username??""),o=_(s()?.user?.profilePic??"");function f(c){const x=c.target;if(x.files&&x.files.length){const H=x.files[0];L(o,URL.createObjectURL(H))}}G();var n=$(),b=i(p(n),2),v=p(b),h=p(v),g=i(p(h),2),A=p(g),l=i(A,2),r=i(p(l));d(l),d(g);var w=i(g,2),y=i(p(w),2);k(y),d(w);var P=i(w,2),S=i(p(P),2);k(S),d(P);var C=i(P,2),F=i(p(C),2);k(F),d(C),z(4),d(h),d(v),X(v,c=>Z?.(c)),d(b),d(n),R(()=>B(A,"src",E(o)||"/default-profile.png")),J("change",r,f),T(y,()=>E(u),c=>L(u,c)),T(S,()=>E(m),c=>L(m,c)),T(F,()=>E(t),c=>L(t,c)),q(e,n),j()}export{ce as component};
