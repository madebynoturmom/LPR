import"../chunks/DsnmJJEf.js";import"../chunks/CYPRAMuI.js";import{aF as $,f as b,aH as E,H as a,b as u,aI as ee,aG as t,aJ as s,U as n,aK as i,ah as l}from"../chunks/VJxR2mP4.js";import{s as ae}from"../chunks/Ci8WC3vH.js";import{i as K}from"../chunks/tQRZQKdW.js";import{r as p,s as te}from"../chunks/CFpdNlsL.js";import{e as N}from"../chunks/Ce3f-6Km.js";import{b as c}from"../chunks/CBdOqptF.js";import{i as re}from"../chunks/GsMnuBgZ.js";import{g as le}from"../chunks/DioV78hU.js";var se=b('<div class="error svelte-kg74qh"> </div>'),ie=b('<img alt="Preview" style="max-width:120px;max-height:120px;border-radius:8px;"/>'),oe=b('<img src="/default-profile.png" alt="Default profile placeholder" style="max-width:120px;max-height:120px;opacity:0.3;border-radius:8px;"/>'),ne=b('<section class="admin-section svelte-kg74qh"><button type="button" class="back-btn svelte-kg74qh">&larr; Back</button> <h2>Add New Admin</h2> <!> <form class="create-admin-form svelte-kg74qh"><label class="svelte-kg74qh">Username <input type="text" required/></label> <label class="svelte-kg74qh">Password <input type="password" required/></label> <label class="svelte-kg74qh">Name <input type="text"/></label> <label class="svelte-kg74qh">Email <input type="email"/></label> <label class="svelte-kg74qh">Phone <input type="text"/></label> <label class="svelte-kg74qh">Profile Picture <input type="file" accept="image/*"/></label> <div style="margin-bottom:1rem;"><!></div> <button type="submit" class="btn btn-create svelte-kg74qh">Create Admin</button></form></section>');function _e(L,O){$(O,!1);let f=n(""),h=n(""),g=n(""),_=n(""),k=n(""),x=n(null),v=n(null),d=n(null),y=n(!1);async function z(e){e.preventDefault(),l(y,!0),l(d,null);const r=await window.crypto.subtle.digest("SHA-256",new TextEncoder().encode(a(h))),m=Array.from(new Uint8Array(r)).map(Z=>Z.toString(16).padStart(2,"0")).join(""),o=new FormData;o.set("username",a(f)),o.set("passwordHash",m),o.set("name",a(g)),o.set("email",a(_)),o.set("phone",a(k)),a(x)&&o.set("profilePic",a(x));const J=await fetch("./create",{method:"POST",body:o});J.ok||l(d,"Failed to create admin"),l(y,!1),J.ok&&le("/admin/dashboard/admins")}re();var w=ne(),R=s(w),T=t(R,4);{var M=e=>{var r=se(),m=s(r,!0);i(r),E(()=>ae(m,a(d))),u(e,r)};K(T,e=>{a(d)&&e(M)})}var q=t(T,2),P=s(q),j=t(s(P));p(j),i(P);var A=t(P,2),B=t(s(A));p(B),i(A);var D=t(A,2),C=t(s(D));p(C),i(D);var H=t(D,2),G=t(s(H));p(G),i(H);var S=t(H,2),I=t(s(S));p(I),i(S);var F=t(S,2),Q=t(s(F));i(F);var U=t(F,2),V=s(U);{var W=e=>{var r=ie();E(()=>te(r,"src",a(v))),u(e,r)},X=e=>{var r=oe();u(e,r)};K(V,e=>{a(v)?e(W):e(X,!1)})}i(U);var Y=t(U,2);i(q),i(w),E(()=>Y.disabled=a(y)),N("click",R,()=>history.back()),c(j,()=>a(f),e=>l(f,e)),c(B,()=>a(h),e=>l(h,e)),c(C,()=>a(g),e=>l(g,e)),c(G,()=>a(_),e=>l(_,e)),c(I,()=>a(k),e=>l(k,e)),N("change",Q,e=>{const r=e.target.files?.[0]??null;if(l(x,r),r){const m=new FileReader;m.onload=o=>l(v,o.target?.result),m.readAsDataURL(r)}else l(v,null)}),N("submit",q,z),u(L,w),ee()}export{_e as component};
