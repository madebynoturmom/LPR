import"../chunks/DsnmJJEf.js";import"../chunks/DsPuBiMm.js";import{o as ne,a as Me}from"../chunks/BaSLTKbU.js";import{t as A,k as ce,o as ve,X as Ge,aU as Ie,Q as ue,_ as Oe,a0 as qe,aV as Ee,aW as Te,K as he,a2 as Ve,J as Be,R as C,p as Ne,l as je,a as He,f as J,b as w,c as Qe,g as e,aB as fe,e as d,u as c,d as i,m as j,s as k,r as t,aS as H,i as Q}from"../chunks/N5lxWZGS.js";import{s as P}from"../chunks/B135_YsI.js";import{i as ge}from"../chunks/DrWauV8B.js";import{e as Ue,i as Fe}from"../chunks/DSP_IF8R.js";import{s as U}from"../chunks/BnZ110ug.js";import{s as x}from"../chunks/Ct8xIc2f.js";import{e as F}from"../chunks/Dx3h8YKD.js";import{b as Je}from"../chunks/BJbTcORX.js";import{i as Ke}from"../chunks/Bc0xGMnQ.js";import{p as Le}from"../chunks/BBnkIoAR.js";import{C as me}from"../chunks/g150VQ4A.js";function pe(D,S,s=!1,p=!1,h=!1){var v=D,r="";A(()=>{var g=Ge;if(r===(r=S()??"")){ce&&ve();return}if(g.nodes_start!==null&&(Ie(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),r!==""){if(ce){ue.data;for(var n=ve(),R=n;n!==null&&(n.nodeType!==Oe||n.data!=="");)R=n,n=qe(n);if(n===null)throw Ee(),Te;he(ue,R),v=Ve(n);return}var m=r+"";s?m=`<svg>${m}</svg>`:p&&(m=`<math>${m}</math>`);var u=Be(m);if((s||p)&&(u=C(u)),he(C(u),u.lastChild),s||p)for(;C(u);)v.before(C(u));else v.before(u)}})}var We=J('<img alt="" width="24" height="24" class="svelte-169czl3"/>'),Xe=J('<a class="quick-action-card svelte-169czl3"><div><!></div> <div class="action-content svelte-169czl3"><h3 class="action-title svelte-169czl3"> </h3> <p class="action-description svelte-169czl3"> </p></div></a>'),Ye=J('<div class="dashboard-container svelte-169czl3"><header class="dashboard-overview svelte-169czl3"><div class="overview-left svelte-169czl3"><div class="overview-text svelte-169czl3"><h1 class="overview-title svelte-169czl3">Dashboard Overview</h1> <div class="overview-date svelte-169czl3"> </div></div></div> <div class="overview-right svelte-169czl3"><a href="/admin/dashboard/settings" class="overview-avatar-link svelte-169czl3" aria-label="Account settings"><img class="overview-avatar svelte-169czl3" alt="Profile" width="48" height="48"/></a></div></header> <section class="issued-section svelte-169czl3"><div class="issued-card svelte-169czl3"><div style="display:flex; align-items:center; gap:1rem; width:100%; justify-content:space-between;"><div><div class="issued-label svelte-169czl3">Issued Guest Passes</div> <div class="issued-value svelte-169czl3"> </div></div> <div class="issued-range svelte-169czl3"><button>7D</button> <button>1M</button> <button>3M</button></div></div> <div class="issued-chart-wrapper svelte-169czl3"><canvas class="issued-canvas svelte-169czl3" aria-label="Issued guest passes chart"></canvas></div></div></section> <section class="quick-actions-section svelte-169czl3"><h2 class="section-title svelte-169czl3">Quick Actions</h2> <div class="quick-actions-grid svelte-169czl3"></div></section></div>');function us(D,S){Ne(S,!1);let s=Le(S,"data",8),p=null,h=j(null),v=j(null),r=j("7d");const g=l=>l==="7d"?7:l==="1m"?30:90,n=l=>{if(!s()?.guestStats||!s().guestStats.length)return[];const a=g(l);return s().guestStats.slice(Math.max(0,s().guestStats.length-a))},R=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});ne(()=>{s()?.guestStats}),s().residents,s().guards,s().vehicles,s().admins,s().guests,s().events;const m=(l="#ffffff")=>`
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <rect x="2" y="2" width="20" height="20" rx="5" fill="currentColor" />
      <path d="M8 12h8" stroke="${l}" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
    </svg>`,u=[{title:"Add Resident",description:"Register a new resident",link:"/admin/dashboard/residents/create",iconPath:"/icons/add-resident.svg",color:"bg-blue-500"},{title:"Issue Guest Pass",description:"Create a new guest pass",link:"/admin/dashboard/guests",iconPath:"/icons/issue-guest.svg",color:"bg-green-500"},{title:"Register Vehicle",description:"Add a new vehicle",link:"/admin/dashboard/vehicles/create",iconPath:"/icons/register-vehicle.svg",color:"bg-purple-500"},{title:"View Reports",description:"Access system reports",link:"/admin/dashboard/events",iconPath:"/icons/view-reports.svg",color:"bg-orange-500"}],_e=s()?.guestStats?s().guestStats.reduce((l,a)=>l+(a.count||0),0):0;ne(()=>{s()?.guestStats}),Me(()=>{e(h)&&e(h).destroy()}),je(()=>(e(v),fe(s()),e(r),e(h),me),()=>{if(e(v)&&s()?.guestStats){const l=n(e(r));e(h)&&(e(h).destroy(),k(h,null));const a=l.length?l.map(o=>o.date):(s().guestStats||[]).map(o=>o.date).slice(-7),f=l.length?l.map(o=>o.count):(s().guestStats||[]).map(o=>o.count).slice(-7);k(h,new me(e(v),{type:"line",data:{labels:a,datasets:[{label:"Guests Issued",data:f,borderColor:"#6366f1",backgroundColor:"rgba(99,102,241,0.12)",fill:!0,tension:.35,pointBackgroundColor:"#6366f1",pointRadius:2,pointHoverRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:"#6b7280"}},y:{display:!0,grid:{color:"#f3f4f6"},ticks:{color:"#6b7280"},beginAtZero:!0}}}}))}}),He(),Ke();var M=Ye(),G=i(M),I=i(G),K=i(I),L=d(i(K),2),be=i(L,!0);t(L),t(K),t(I);var W=d(I,2),X=i(W),we=i(X);t(X),t(W),t(G);var O=d(G,2),Y=i(O),q=i(Y),E=i(q),Z=d(i(E),2),ke=i(Z,!0);t(Z),t(E);var $=d(E,2),T=i($);let ee;var V=d(T,2);let se;var ae=d(V,2);let te;t($),t(q);var ie=d(q,2),ze=i(ie);Je(ze,l=>k(v,l),()=>e(v)),t(ie),t(Y),t(O);var le=d(O,2),re=d(i(le),2);Ue(re,5,()=>u,Fe,(l,a)=>{var f=Xe(),o=i(f),ye=i(o);{var Se=_=>{var z=H(),N=Q(z);pe(N,()=>(e(a),c(()=>e(a).iconSvg))),w(_,z)},Re=_=>{var z=H(),N=Q(z);{var xe=b=>{var y=We();A(()=>U(y,"src",(e(a),c(()=>e(a).iconPath)))),w(b,y)},Ae=b=>{var y=H(),De=Q(y);pe(De,()=>c(m)),w(b,y)};ge(N,b=>{e(a),c(()=>e(a).iconPath)?b(xe):b(Ae,!1)},!0)}w(_,z)};ge(ye,_=>{e(a),c(()=>e(a).iconSvg)?_(Se):_(Re,!1)})}t(o);var oe=d(o,2),B=i(oe),Ce=i(B,!0);t(B);var de=d(B,2),Pe=i(de,!0);t(de),t(oe),t(f),A(()=>{U(f,"href",(e(a),c(()=>e(a).link))),x(o,1,`action-icon ${e(a),c(()=>e(a).color)??""}`,"svelte-169czl3"),P(Ce,(e(a),c(()=>e(a).title))),P(Pe,(e(a),c(()=>e(a).description)))}),w(l,f)}),t(re),t(le),t(M),A((l,a,f)=>{P(be,R),U(we,"src",(fe(s()),c(()=>s().adminProfilePic??"/default-profile.png"))),P(ke,_e),ee=x(T,1,"svelte-169czl3",null,ee,l),se=x(V,1,"svelte-169czl3",null,se,a),te=x(ae,1,"svelte-169czl3",null,te,f)},[()=>({active:e(r)==="7d"}),()=>({active:e(r)==="1m"}),()=>({active:e(r)==="3m"})]),F("click",T,()=>k(r,"7d")),F("click",V,()=>k(r,"1m")),F("click",ae,()=>k(r,"3m")),w(D,M),Qe()}export{us as component};
