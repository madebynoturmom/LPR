import"../chunks/DsnmJJEf.js";import"../chunks/DsPuBiMm.js";import{p as ee,f,t as E,g as t,b as v,c as te,e as a,d as i,m as n,r as s,s as l}from"../chunks/N5lxWZGS.js";import{s as ae}from"../chunks/B135_YsI.js";import{i as I}from"../chunks/DrWauV8B.js";import{r as m,s as re}from"../chunks/BnZ110ug.js";import{e as N}from"../chunks/Dx3h8YKD.js";import{b as c}from"../chunks/DnwoYYiD.js";import{i as le}from"../chunks/Bc0xGMnQ.js";import{g as ie}from"../chunks/WNbVgFxQ.js";var se=f('<div class="error"> </div>'),oe=f('<img alt="Preview"/>'),ne=f('<img src="/default-profile.png" alt="Default profile placeholder"/>'),pe=f('<section class="admin-section"><button type="button" class="back-btn">&larr; Back</button> <h2 class="admin-title">Add New Admin</h2> <!> <form class="create-admin-form"><div class="form-grid"><label>Username <input class="text-input" type="text" required/></label> <label>Password <input class="text-input" type="password" required/></label> <label>Name <input class="text-input" type="text"/></label> <label>Email <input class="text-input" type="email"/></label> <label>Phone <input class="text-input" type="text"/></label></div> <label class="profile-upload">Profile Picture <input type="file" accept="image/*"/></label> <div class="avatar-preview"><!></div> <button type="submit" class="btn btn-create primary-cta">Create Admin</button></form></section>');function we(J,K){ee(K,!1);let b=n(""),_=n(""),h=n(""),g=n(""),w=n(""),y=n(null),u=n(null),d=n(null),x=n(!1);async function M(e){e.preventDefault(),l(x,!0),l(d,null);const r=await window.crypto.subtle.digest("SHA-256",new TextEncoder().encode(t(_))),p=Array.from(new Uint8Array(r)).map($=>$.toString(16).padStart(2,"0")).join(""),o=new FormData;o.set("username",t(b)),o.set("passwordHash",p),o.set("name",t(h)),o.set("email",t(g)),o.set("phone",t(w)),t(y)&&o.set("profilePic",t(y));const G=await fetch("./create",{method:"POST",body:o});G.ok||l(d,"Failed to create admin"),l(x,!1),G.ok&&ie("/admin/dashboard/admins")}le();var P=pe(),R=i(P),T=a(R,4);{var Q=e=>{var r=se(),p=i(r,!0);s(r),E(()=>ae(p,t(d))),v(e,r)};I(T,e=>{t(d)&&e(Q)})}var k=a(T,2),A=i(k),D=i(A),j=a(i(D));m(j),s(D);var S=a(D,2),B=a(i(S));m(B),s(S);var F=a(S,2),C=a(i(F));m(C),s(F);var H=a(F,2),L=a(i(H));m(L),s(H);var O=a(H,2),z=a(i(O));m(z),s(O),s(A);var U=a(A,2),V=a(i(U));s(U);var q=a(U,2),W=i(q);{var X=e=>{var r=oe();E(()=>re(r,"src",t(u))),v(e,r)},Y=e=>{var r=ne();v(e,r)};I(W,e=>{t(u)?e(X):e(Y,!1)})}s(q);var Z=a(q,2);s(k),s(P),E(()=>Z.disabled=t(x)),N("click",R,()=>history.back()),c(j,()=>t(b),e=>l(b,e)),c(B,()=>t(_),e=>l(_,e)),c(C,()=>t(h),e=>l(h,e)),c(L,()=>t(g),e=>l(g,e)),c(z,()=>t(w),e=>l(w,e)),N("change",V,e=>{const r=e.target.files?.[0]??null;if(l(y,r),r){const p=new FileReader;p.onload=o=>l(u,o.target?.result),p.readAsDataURL(r)}else l(u,null)}),N("submit",k,M),v(J,P),te()}export{we as component};
