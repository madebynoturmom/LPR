import"../chunks/DsnmJJEf.js";import"../chunks/CaduOojm.js";import{o as T}from"../chunks/DJtz8HCy.js";import{aF as z,aM as Q,aN as V,f as M,aK as N,H as e,a as A,aG as W,aH as t,aI as l,aa as r,U as o,aJ as i}from"../chunks/c4qruIAv.js";import{s as X}from"../chunks/HIJMQ0Il.js";import{i as Y}from"../chunks/CE_Elu-f.js";import{r as u,a as Z}from"../chunks/NX4HCjE0.js";import{e as H}from"../chunks/Cd9Ou9lz.js";import{b as y}from"../chunks/Cpx9Zc3b.js";import{p as ee}from"../chunks/D4Caz1gY.js";import{i as ae}from"../chunks/p-fOG7Xz.js";import{s as se,a as te}from"../chunks/CYbLQOsd.js";import{p as re}from"../chunks/C5ccUtUr.js";import{i as le}from"../chunks/DfxkLT-v.js";var ie=M('<p class="message svelte-6y6vmx"> </p>'),oe=M('<div class="settings-container svelte-6y6vmx"><a href="/admin/dashboard" class="back-btn">‚Üê Back to Dashboard</a> <h1 class="svelte-6y6vmx">Account Settings</h1> <form class="settings-form svelte-6y6vmx" enctype="multipart/form-data"><div class="profile-pic-section svelte-6y6vmx"><img alt="Profile preview" class="profile-pic-preview svelte-6y6vmx"/> <label for="profilePicture" class="upload-label svelte-6y6vmx">Change Photo <input id="profilePicture" type="file" accept="image/*" class="svelte-6y6vmx"/></label></div> <div class="form-row svelte-6y6vmx"><label for="username" class="svelte-6y6vmx">Username</label> <input id="username" type="text" required class="svelte-6y6vmx"/></div> <div class="form-row svelte-6y6vmx"><label for="name" class="svelte-6y6vmx">Name</label> <input id="name" type="text" required class="svelte-6y6vmx"/></div> <div class="form-row svelte-6y6vmx"><label for="email" class="svelte-6y6vmx">Email</label> <input id="email" type="email" required class="svelte-6y6vmx"/></div> <div class="form-row svelte-6y6vmx"><label for="password" class="svelte-6y6vmx">New Password</label> <input id="password" type="password" placeholder="Leave blank to keep current password" autocomplete="new-password" class="svelte-6y6vmx"/></div> <button class="save-btn svelte-6y6vmx" type="submit">Save Changes</button> <!></form></div>');function we(O,R){z(R,!1);const $=()=>te(re,"$page",j),[j,B]=se(),m=o();let p=o(""),v=o(""),n=o(""),c=o(""),b=o(""),f=null,d=o("");T(()=>{e(m)&&(r(p,e(m).name||""),r(v,e(m).email||""),r(n,e(m).username||""),r(b,e(m).profilePic||""))});async function E(a){const s=a.target;s.files&&s.files.length>0&&(f=s.files[0],r(b,URL.createObjectURL(f)))}async function G(a){a.preventDefault();const s=new FormData;s.append("name",e(p)),s.append("email",e(v)),s.append("username",e(n)),e(c)&&s.append("password",e(c)),f&&s.append("profilePicture",f),(await fetch("/admin/dashboard/settings",{method:"POST",body:s})).ok?(r(d,"Account updated successfully!"),await le("user")):r(d,"Failed to update account.")}Q(()=>$(),()=>{r(m,$().data?.user)}),V(),ae();var _=oe(),x=t(l(_),4),g=l(x),D=l(g),F=t(D,2),I=t(l(F));i(F),i(g);var h=t(g,2),S=t(l(h),2);u(S),i(h);var w=t(h,2),U=t(l(w),2);u(U),i(w);var P=t(w,2),q=t(l(P),2);u(q),i(P);var k=t(P,2),C=t(l(k),2);u(C),i(k);var J=t(k,4);{var K=a=>{var s=ie(),L=l(s,!0);i(s),N(()=>X(L,e(d))),A(a,s)};Y(J,a=>{e(d)&&a(K)})}i(x),i(_),N(()=>Z(D,"src",e(b)||"/default-profile.png")),H("change",I,E),y(S,()=>e(n),a=>r(n,a)),y(U,()=>e(p),a=>r(p,a)),y(q,()=>e(v),a=>r(v,a)),y(C,()=>e(c),a=>r(c,a)),H("submit",x,ee(G)),A(O,_),W(),B()}export{we as component};
