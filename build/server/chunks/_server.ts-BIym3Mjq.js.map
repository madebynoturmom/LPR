{"version":3,"file":"_server.ts-BIym3Mjq.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/recent-activity/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { d as db, e as eventLog } from \"../../../../chunks/index3.js\";\nimport { desc } from \"drizzle-orm\";\nasync function GET() {\n  const recentEvents = await db.select().from(eventLog).orderBy(desc(eventLog.timestamp)).limit(10);\n  const activeGuestPasses = recentEvents.filter((event) => event.type === \"guest_pass\" && event.details?.includes(\"active\")).length;\n  const activeFoodDeliveryPasses = recentEvents.filter((event) => event.type === \"food_delivery\" && event.details?.includes(\"active\")).length;\n  const recentCarAccess = recentEvents.find((event) => event.type === \"vehicle_access\")?.details || \"N/A\";\n  return json({\n    activeGuestPasses,\n    activeFoodDeliveryPasses,\n    recentCarAccess\n  });\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAGA,eAAe,GAAG,GAAG;AACrB,EAAE,MAAM,YAAY,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC;AACnG,EAAE,MAAM,iBAAiB,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,YAAY,IAAI,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM;AACnI,EAAE,MAAM,wBAAwB,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,eAAe,IAAI,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM;AAC7I,EAAE,MAAM,eAAe,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,gBAAgB,CAAC,EAAE,OAAO,IAAI,KAAK;AACzG,EAAE,OAAO,IAAI,CAAC;AACd,IAAI,iBAAiB;AACrB,IAAI,wBAAwB;AAC5B,IAAI;AACJ,GAAG,CAAC;AACJ;;;;"}