{"version":3,"file":"_server.ts-DdN5xj7R.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/login/identify/_server.ts.js"],"sourcesContent":["import { d as db, a as admin, b as guard, u as user } from \"../../../../chunks/index3.js\";\nimport { eq } from \"drizzle-orm\";\nimport { json } from \"@sveltejs/kit\";\nconst GET = async ({ url }) => {\n  const username = url.searchParams.get(\"username\")?.toString().trim();\n  if (!username) return json({ role: null }, { status: 400 });\n  const usernameLower = username.toLowerCase();\n  const admins = await db.select().from(admin).where(eq(admin.username, usernameLower));\n  if (admins.length > 0) return json({ role: \"admin\" });\n  const guards = await db.select().from(guard).where(eq(guard.username, usernameLower));\n  if (guards.length > 0) return json({ role: \"guard\" });\n  const users = await db.select().from(user).where(eq(user.username, usernameLower));\n  if (users.length > 0) return json({ role: users[0].role });\n  return json({ role: null }, { status: 404 });\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAGK,MAAC,GAAG,GAAG,OAAO,EAAE,GAAG,EAAE,KAAK;AAC/B,EAAE,MAAM,QAAQ,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,CAAC,IAAI,EAAE;AACtE,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC7D,EAAE,MAAM,aAAa,GAAG,QAAQ,CAAC,WAAW,EAAE;AAC9C,EAAE,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;AACvF,EAAE,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;AACvD,EAAE,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;AACvF,EAAE,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;AACvD,EAAE,MAAM,KAAK,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC;AACpF,EAAE,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;AAC5D,EAAE,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC9C;;;;"}