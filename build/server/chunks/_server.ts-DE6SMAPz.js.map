{"version":3,"file":"_server.ts-DE6SMAPz.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/admin/dashboard/guests/_id_/extend/_server.ts.js"],"sourcesContent":["import { d as db, g as guestPass } from \"../../../../../../../chunks/index3.js\";\nimport { eq } from \"drizzle-orm/sql/expressions/conditions\";\nconst POST = async ({ request, params }) => {\n  const id = params.id;\n  const form = await request.formData();\n  const minutes = Number(form.get(\"minutes\")) || Number(form.get(\"minutes\")) === 0 ? Number(form.get(\"minutes\")) : null;\n  if (!id || !minutes || minutes <= 0) {\n    return new Response(JSON.stringify({ error: \"Missing id or invalid minutes\" }), { status: 400, headers: { \"Content-Type\": \"application/json\" } });\n  }\n  const existing = await db.select().from(guestPass).where(eq(guestPass.id, id)).get();\n  if (!existing) {\n    return new Response(JSON.stringify({ error: \"Pass not found\" }), { status: 404, headers: { \"Content-Type\": \"application/json\" } });\n  }\n  const current = Number(existing.durationMinutes) || 0;\n  const newDuration = current + Number(minutes);\n  await db.update(guestPass).set({ durationMinutes: newDuration }).where(eq(guestPass.id, id));\n  const updated = { ...existing, durationMinutes: newDuration };\n  return new Response(JSON.stringify({ pass: updated }), { status: 200, headers: { \"Content-Type\": \"application/json\" } });\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;AAEK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK;AAC5C,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC,EAAE;AACtB,EAAE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AACvC,EAAE,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI;AACvH,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,OAAO,IAAI,OAAO,IAAI,CAAC,EAAE;AACvC,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,+BAA+B,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,EAAE,CAAC;AACrJ,EAAE;AACF,EAAE,MAAM,QAAQ,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE;AACtF,EAAE,IAAI,CAAC,QAAQ,EAAE;AACjB,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,EAAE,CAAC;AACtI,EAAE;AACF,EAAE,MAAM,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC;AACvD,EAAE,MAAM,WAAW,GAAG,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC/C,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,eAAe,EAAE,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AAC9F,EAAE,MAAM,OAAO,GAAG,EAAE,GAAG,QAAQ,EAAE,eAAe,EAAE,WAAW,EAAE;AAC/D,EAAE,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,EAAE,CAAC;AAC1H;;;;"}