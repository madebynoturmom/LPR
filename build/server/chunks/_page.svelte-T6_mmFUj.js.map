{"version":3,"file":"_page.svelte-T6_mmFUj.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/guard/dashboard/_page.svelte.js"],"sourcesContent":["import { X as ensure_array_like, $ as bind_props } from \"../../../../chunks/index2.js\";\nimport { a as attr } from \"../../../../chunks/attributes.js\";\nimport { e as escape_html } from \"../../../../chunks/escaping.js\";\nfunction _page($$renderer, $$props) {\n  $$renderer.component(($$renderer2) => {\n    let filteredVisitors, filteredFood;\n    let data = $$props[\"data\"];\n    let visitors = data?.activeVisitorPasses ?? [];\n    let food = data?.activeFoodDeliveryPasses ?? [];\n    let recent = data?.recentCarAccess ?? [];\n    let query = \"\";\n    function fmt(dt) {\n      try {\n        return new Date(dt).toLocaleString();\n      } catch (e) {\n        return dt;\n      }\n    }\n    filteredVisitors = visitors.filter((p) => {\n      return true;\n    });\n    filteredFood = food.filter((p) => {\n      return true;\n    });\n    $$renderer2.push(`<div class=\"guard-dashboard svelte-19vu5z5\"><header class=\"gd-header svelte-19vu5z5\"><h1>Guard Dashboard</h1> <div class=\"gd-controls svelte-19vu5z5\"><input placeholder=\"Search plate or name\"${attr(\"value\", query)} class=\"svelte-19vu5z5\"/></div></header> <section class=\"gd-stats svelte-19vu5z5\"><div class=\"stat svelte-19vu5z5\">Active Visitors: ${escape_html(visitors.length)}</div> <div class=\"stat svelte-19vu5z5\">Active Deliveries: ${escape_html(food.length)}</div></section> <section class=\"gd-lists svelte-19vu5z5\"><div class=\"list-card svelte-19vu5z5\"><h2>Visitors</h2> `);\n    if (filteredVisitors.length > 0) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<table class=\"svelte-19vu5z5\"><thead><tr><th class=\"svelte-19vu5z5\">Plate</th><th class=\"svelte-19vu5z5\">Name</th><th class=\"svelte-19vu5z5\">Visit</th><th class=\"svelte-19vu5z5\">Duration</th><th class=\"svelte-19vu5z5\">Actions</th></tr></thead><tbody><!--[-->`);\n      const each_array = ensure_array_like(filteredVisitors);\n      for (let $$index = 0, $$length = each_array.length; $$index < $$length; $$index++) {\n        let p = each_array[$$index];\n        $$renderer2.push(`<tr><td class=\"svelte-19vu5z5\">${escape_html(p.plateNumber)}</td><td class=\"svelte-19vu5z5\">${escape_html(p.name)}</td><td class=\"svelte-19vu5z5\">${escape_html(fmt(p.visitTime))}</td><td class=\"svelte-19vu5z5\">${escape_html(p.durationMinutes)}m</td><td class=\"svelte-19vu5z5\"><form method=\"POST\" action=\"?/admit\" style=\"display:inline\"><input type=\"hidden\" name=\"id\"${attr(\"value\", p.id)}/> <button type=\"submit\" class=\"btn-admit svelte-19vu5z5\">Admit</button></form> <form method=\"POST\" action=\"?/deny\" style=\"display:inline; margin-left:0.5rem;\"><input type=\"hidden\" name=\"id\"${attr(\"value\", p.id)}/> <button type=\"submit\" class=\"btn-deny svelte-19vu5z5\">Deny</button></form></td></tr>`);\n      }\n      $$renderer2.push(`<!--]--></tbody></table>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<p>No active visitor passes.</p>`);\n    }\n    $$renderer2.push(`<!--]--></div> <div class=\"list-card svelte-19vu5z5\"><h2>Food Deliveries</h2> `);\n    if (filteredFood.length > 0) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<table class=\"svelte-19vu5z5\"><thead><tr><th class=\"svelte-19vu5z5\">Plate</th><th class=\"svelte-19vu5z5\">Name</th><th class=\"svelte-19vu5z5\">Visit</th><th class=\"svelte-19vu5z5\">Duration</th><th class=\"svelte-19vu5z5\">Actions</th></tr></thead><tbody><!--[-->`);\n      const each_array_1 = ensure_array_like(filteredFood);\n      for (let $$index_1 = 0, $$length = each_array_1.length; $$index_1 < $$length; $$index_1++) {\n        let p = each_array_1[$$index_1];\n        $$renderer2.push(`<tr><td class=\"svelte-19vu5z5\">${escape_html(p.plateNumber)}</td><td class=\"svelte-19vu5z5\">${escape_html(p.name)}</td><td class=\"svelte-19vu5z5\">${escape_html(fmt(p.visitTime))}</td><td class=\"svelte-19vu5z5\">${escape_html(p.durationMinutes)}m</td><td class=\"svelte-19vu5z5\"><form method=\"POST\" action=\"?/admit\" style=\"display:inline\"><input type=\"hidden\" name=\"id\"${attr(\"value\", p.id)}/> <button type=\"submit\" class=\"btn-admit svelte-19vu5z5\">Admit</button></form> <form method=\"POST\" action=\"?/deny\" style=\"display:inline; margin-left:0.5rem;\"><input type=\"hidden\" name=\"id\"${attr(\"value\", p.id)}/> <button type=\"submit\" class=\"btn-deny svelte-19vu5z5\">Deny</button></form></td></tr>`);\n      }\n      $$renderer2.push(`<!--]--></tbody></table>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<p>No active food delivery passes.</p>`);\n    }\n    $$renderer2.push(`<!--]--></div></section> <section class=\"gd-events svelte-19vu5z5\"><h2>Recent Events</h2> `);\n    if (recent.length > 0) {\n      $$renderer2.push(\"<!--[-->\");\n      $$renderer2.push(`<ul><!--[-->`);\n      const each_array_2 = ensure_array_like(recent);\n      for (let $$index_2 = 0, $$length = each_array_2.length; $$index_2 < $$length; $$index_2++) {\n        let r = each_array_2[$$index_2];\n        $$renderer2.push(`<li>${escape_html(new Date(r.timestamp).toLocaleString())} â€” ${escape_html(r.details)}</li>`);\n      }\n      $$renderer2.push(`<!--]--></ul>`);\n    } else {\n      $$renderer2.push(\"<!--[!-->\");\n      $$renderer2.push(`<p>No recent events.</p>`);\n    }\n    $$renderer2.push(`<!--]--></section></div>`);\n    bind_props($$props, { data });\n  });\n}\nexport {\n  _page as default\n};\n"],"names":[],"mappings":"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"}