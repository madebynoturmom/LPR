import"../chunks/DsnmJJEf.js";import"../chunks/CYPRAMuI.js";import{aF as me,aM as ye,aN as be,f as O,aG as s,aO as _e,aH as H,H as l,b as N,aI as we,aJ as r,ah as a,U as i,aK as t}from"../chunks/VJxR2mP4.js";import{s as Z}from"../chunks/Ci8WC3vH.js";import{i as ee}from"../chunks/tQRZQKdW.js";import{r as d,s as he}from"../chunks/CFpdNlsL.js";import{e as M}from"../chunks/Ce3f-6Km.js";import{b as v}from"../chunks/CBdOqptF.js";import{p as se}from"../chunks/D4Caz1gY.js";import{i as je}from"../chunks/GsMnuBgZ.js";import{s as ge,a as Pe}from"../chunks/CaHHrb2w.js";import{p as Ae}from"../chunks/Cetg04vO.js";import{i as ae}from"../chunks/CmBdg4qq.js";var xe=O('<div class="message svelte-n628yj"> </div>'),De=O('<div class="message svelte-n628yj"> </div>'),Ce=O('<a href="/user/dashboard" class="back-btn svelte-n628yj">&larr; Back to Dashboard</a> <div class="profile-card move-up svelte-n628yj"><h1>Account Settings</h1> <div class="profile-forms-row svelte-n628yj"><div class="profile-settings-col svelte-n628yj"><form class="profile-form svelte-n628yj" enctype="multipart/form-data"><div class="profile-pic-section svelte-n628yj"><img alt="Profile preview" class="profile-pic-preview svelte-n628yj"/> <label for="profilePicture" class="upload-label svelte-n628yj"><span>Change Photo</span> <input id="profilePicture" name="profilePicture" type="file" accept="image/*" class="svelte-n628yj"/></label></div> <div class="form-grid svelte-n628yj"><div class="form-row svelte-n628yj"><label for="username" class="svelte-n628yj">Username</label> <input id="username" name="username" type="text" required class="svelte-n628yj"/></div> <div class="form-row svelte-n628yj"><label for="name" class="svelte-n628yj">Name</label> <input id="name" name="name" type="text" required class="svelte-n628yj"/></div> <div class="form-row svelte-n628yj"><label for="email" class="svelte-n628yj">Email</label> <input id="email" name="email" type="email" required class="svelte-n628yj"/></div> <div class="form-row svelte-n628yj"><label for="phone" class="svelte-n628yj">Phone</label> <input id="phone" name="phone" type="text" class="svelte-n628yj"/></div> <div class="form-row svelte-n628yj"><label for="houseAddress" class="svelte-n628yj">House Address</label> <input id="houseAddress" name="houseAddress" type="text" class="svelte-n628yj"/></div></div> <button class="save-btn svelte-n628yj" type="submit">Save Changes</button> <!></form></div> <div class="password-col svelte-n628yj"><form class="password-form" autocomplete="off"><h2>Change Password</h2> <div class="form-row svelte-n628yj"><label for="currentPassword" class="svelte-n628yj">Current Password</label> <input id="currentPassword" type="password" required autocomplete="current-password" class="svelte-n628yj"/></div> <div class="form-row svelte-n628yj"><label for="newPassword" class="svelte-n628yj">New Password</label> <input id="newPassword" type="password" required autocomplete="new-password" class="svelte-n628yj"/></div> <button class="save-btn password-btn svelte-n628yj" type="submit">Update Password</button> <!></form></div></div></div>',1);function Ge(re,te){me(te,!1);const y=()=>Pe(Ae,"$page",le),[le,oe]=ge();let b=i(""),_=i(""),w=i(""),f=i(""),u=i(""),m=i("");async function ie(e){if(e.preventDefault(),!l(f)||!l(u)){a(m,"Please fill in both fields.");return}a(m,"Password updated successfully!"),a(f,""),a(u,"")}let h=i(""),j=i(""),g=i(null),c=i("");function ne(e){const o=e.target;if(o.files&&o.files[0]){const n=new FileReader;n.onload=p=>{a(g,p.target?.result)},n.readAsDataURL(o.files[0])}}async function de(e){e.preventDefault();const o=e.target,n=new FormData(o);try{const p=await fetch("/user/dashboard/profile",{method:"POST",body:n}),Y=await p.json();p.ok?(a(c,Y.message||"Profile updated successfully!"),await ae("app:profile"),await ae("/user/dashboard")):a(c,Y.error||"Failed to update profile.")}catch(p){console.error("Profile update error:",p),a(c,"An error occurred while updating your profile.")}}ye(()=>y(),()=>{if(y().data.user){const e=y().data.user;a(b,e.name||""),a(_,e.email||""),a(w,e.username||""),a(h,e.phone||""),a(j,e.houseAddress||""),a(g,e.profilePic||null)}}),be(),je();var R=Ce(),B=s(_e(R),2),E=s(r(B),2),P=r(E),A=r(P),x=r(A),G=r(x),I=s(G,2),ve=s(r(I),2);t(I),t(x);var D=s(x,2),C=r(D),J=s(r(C),2);d(J),t(C);var $=s(C,2),K=s(r($),2);d(K),t($);var q=s($,2),L=s(r(q),2);d(L),t(q);var F=s(q,2),T=s(r(F),2);d(T),t(F);var z=s(F,2),Q=s(r(z),2);d(Q),t(z),t(D);var pe=s(D,4);{var ce=e=>{var o=xe(),n=r(o,!0);t(o),H(()=>Z(n,l(c))),N(e,o)};ee(pe,e=>{l(c)&&e(ce)})}t(A),t(P);var V=s(P,2),k=r(V),S=s(r(k),2),W=s(r(S),2);d(W),t(S);var U=s(S,2),X=s(r(U),2);d(X),t(U);var fe=s(U,4);{var ue=e=>{var o=De(),n=r(o,!0);t(o),H(()=>Z(n,l(m))),N(e,o)};ee(fe,e=>{l(m)&&e(ue)})}t(k),t(V),t(E),t(B),H(()=>he(G,"src",l(g)||"/default-profile.png")),M("change",ve,ne),v(J,()=>l(w),e=>a(w,e)),v(K,()=>l(b),e=>a(b,e)),v(L,()=>l(_),e=>a(_,e)),v(T,()=>l(h),e=>a(h,e)),v(Q,()=>l(j),e=>a(j,e)),M("submit",A,se(de)),v(W,()=>l(f),e=>a(f,e)),v(X,()=>l(u),e=>a(u,e)),M("submit",k,se(ie)),N(re,R),we(),oe()}export{Ge as component};
