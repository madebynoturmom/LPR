import"../chunks/DsnmJJEf.js";import"../chunks/COTvsYcR.js";import{p as ee,f,t as j,g as t,c as d,d as te,s as a,e as r,m as n,r as i,j as s}from"../chunks/BjJWVY7i.js";import{s as ae}from"../chunks/DyiMSgY8.js";import{i as I}from"../chunks/D6O3RN6I.js";import{r as v,s as le}from"../chunks/DWyjkCdo.js";import{e as E}from"../chunks/CbnbkC1n.js";import{b as m}from"../chunks/Btu2CQ7A.js";import{i as se}from"../chunks/BbceK8gy.js";import{g as re}from"../chunks/Bz7ZLckS.js";var ie=f('<div class="error svelte-kg74qh"> </div>'),oe=f('<img alt="Preview" class="svelte-kg74qh"/>'),ne=f('<img src="/default-profile.png" alt="Default profile placeholder" class="svelte-kg74qh"/>'),pe=f('<section class="admin-section svelte-kg74qh"><button type="button" class="back-btn svelte-kg74qh">&larr; Back</button> <h2 class="admin-title svelte-kg74qh">Add New Admin</h2> <!> <form class="create-admin-form"><div class="form-grid svelte-kg74qh"><label>Username <input class="text-input svelte-kg74qh" type="text" required/></label> <label>Password <input class="text-input svelte-kg74qh" type="password" required/></label> <label>Name <input class="text-input svelte-kg74qh" type="text"/></label> <label>Email <input class="text-input svelte-kg74qh" type="email"/></label> <label>Phone <input class="text-input svelte-kg74qh" type="text"/></label></div> <label class="profile-upload svelte-kg74qh">Profile Picture <input type="file" accept="image/*" class="svelte-kg74qh"/></label> <div class="avatar-preview svelte-kg74qh"><!></div> <button type="submit" class="btn btn-create primary-cta svelte-kg74qh">Create Admin</button></form></section>');function ke(J,K){ee(K,!1);let b=n(""),h=n(""),g=n(""),_=n(""),k=n(""),q=n(null),c=n(null),u=n(null),w=n(!1);async function M(e){e.preventDefault(),s(w,!0),s(u,null);const l=await window.crypto.subtle.digest("SHA-256",new TextEncoder().encode(t(h))),p=Array.from(new Uint8Array(l)).map($=>$.toString(16).padStart(2,"0")).join(""),o=new FormData;o.set("username",t(b)),o.set("passwordHash",p),o.set("name",t(g)),o.set("email",t(_)),o.set("phone",t(k)),t(q)&&o.set("profilePic",t(q));const G=await fetch("./create",{method:"POST",body:o});G.ok||s(u,"Failed to create admin"),s(w,!1),G.ok&&re("/admin/dashboard/admins")}se();var y=pe(),N=r(y),R=a(N,4);{var Q=e=>{var l=ie(),p=r(l,!0);i(l),j(()=>ae(p,t(u))),d(e,l)};I(R,e=>{t(u)&&e(Q)})}var x=a(R,2),P=r(x),A=r(P),T=a(r(A));v(T),i(A);var D=a(A,2),B=a(r(D));v(B),i(D);var S=a(D,2),C=a(r(S));v(C),i(S);var F=a(S,2),L=a(r(F));v(L),i(F);var O=a(F,2),z=a(r(O));v(z),i(O),i(P);var H=a(P,2),V=a(r(H));i(H);var U=a(H,2),W=r(U);{var X=e=>{var l=oe();j(()=>le(l,"src",t(c))),d(e,l)},Y=e=>{var l=ne();d(e,l)};I(W,e=>{t(c)?e(X):e(Y,!1)})}i(U);var Z=a(U,2);i(x),i(y),j(()=>Z.disabled=t(w)),E("click",N,()=>history.back()),m(T,()=>t(b),e=>s(b,e)),m(B,()=>t(h),e=>s(h,e)),m(C,()=>t(g),e=>s(g,e)),m(L,()=>t(_),e=>s(_,e)),m(z,()=>t(k),e=>s(k,e)),E("change",V,e=>{const l=e.target.files?.[0]??null;if(s(q,l),l){const p=new FileReader;p.onload=o=>s(c,o.target?.result),p.readAsDataURL(l)}else s(c,null)}),E("submit",x,M),d(J,y),te()}export{ke as component};
